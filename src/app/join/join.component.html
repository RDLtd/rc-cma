<div class="rc-join">
  <div class="rc-join-info">
    <div>
      <div class="rc-join-welcome" [ngSwitch]="referrer.type">
        <img class="rc-brand-logo" src="../assets/images/{{ company_logo_root }}-trans-white.svg" alt="Logo">

        <!-- Self -->
        <div *ngSwitchCase="'self'">
          <h1>{{ 'Join.Free' | translate }}</h1>
          <p>{{ 'Join.Part' | translate }} <strong>{{ company_name }}</strong>
            {{ 'Join.Enjoy' | translate }}</p>
          <ol>
            <li>{{ 'Join.Free1' | translate }}</li>
            <li>{{ 'Join.Free2' | translate }}</li>
            <li>{{ 'Join.Free3' | translate }}</li>
          </ol>
          <div *ngIf="company_name==='Restaurant Collective'; else French">
            <p>{{ 'Join.Problems' | translate }}
              <a href="mailto:support@restaurantcollective.uk">{{ 'Join.SupportTeam' | translate }}</a>.
            </p>
          </div>
          <ng-template #French>
            <p>{{ 'Join.Problems' | translate }}
              <a href="mailto:support@restaurateurs-independants.fr">{{ 'Join.SupportTeam' | translate }}</a>.
            </p>
          </ng-template>
        </div>
        <!-- Member -->
        <div *ngSwitchCase="'member'">
          <h1>{{ 'Join.Support' | translate }}</h1>
          <p>{{ 'Join.Invited' | translate }} <strong>{{ referrer?.name }}</strong> {{ 'Join.Become' | translate }} {{ company_name }},
            {{ 'Join.Exciting' | translate }}</p>
          <p>{{ 'Join.ToActivate' | translate }} {{ referrer?.name }} {{ 'Join.Follow' | translate }}</p>
          <ol>
            <li>{{ 'Join.Step1' | translate }}</li>
            <li>{{ 'Join.Step2' | translate }}</li>
            <li>{{ 'Join.Step3' | translate }}</li>
          </ol>
          <div *ngIf="company_name==='Restaurant Collective'; else French">
            <p>{{ 'Join.Problems' | translate }}
              <a href="mailto:support@restaurantcollective.uk">{{ 'Join.SupportTeam' | translate }}</a>.
            </p>
          </div>
          <ng-template #French>
            <p>{{ 'Join.Problems' | translate }}
              <a href="mailto:support@restaurateurs-independants.fr">{{ 'Join.SupportTeam' | translate }}</a>.
            </p>
          </ng-template>
        </div>

        <!-- Default -->
        <div *ngSwitchDefault>
          <h1>{{ 'Join.Free' | translate }}</h1>
          <p>{{ 'Join.Part' | translate }}<strong>{{ company_name }}</strong>
            {{ 'Join.Enjoy' | translate }}</p>
          <ol>
            <li>{{ 'Join.Free1' | translate }}</li>
            <li>{{ 'Join.Free2' | translate }}</li>
            <li>{{ 'Join.Free3' | translate }}</li>
          </ol>
          <div *ngIf="company_name==='Restaurant Collective'; else French">
            <p>{{ 'Join.Problems' | translate }}
              <a href="mailto:support@restaurantcollective.uk">{{ 'Join.SupportTeam' | translate }}</a>.
            </p>
          </div>
          <ng-template #French>
            <p>{{ 'Join.Problems' | translate }}
              <a href="mailto:support@restaurateurs-independants.fr">{{ 'Join.SupportTeam' | translate }}</a>.
            </p>
          </ng-template>
        </div>
      </div>
    </div>
  </div>

  <div class="rc-join-form" [ngSwitch]="newRegResult">

    <!-- Support Request sent -->
    <div *ngSwitchCase="'support-request-sent'">
      <div class="rc-centre">
        <img src="../../assets/images/icons/checkmark.gif" height="128" width="128" alt="Success"/></div>
      <h1>{{ 'Join.OK' | translate }}</h1>
      <p>{{ 'Join.Team' | translate }}</p>
      <p><strong>{{ company_name }} {{ 'Join.Curation' | translate }}</strong></p>
      <p><a [routerLink]="'/signin'">{{ 'Join.SignIn' | translate }}</a></p>
    </div>

    <!-- Self Register -->
    <div *ngSwitchCase="'self-registered'">
      <div class="rc-centre">
        <img src="../../assets/images/icons/checkmark.gif" height="128" width="128" alt="Success"/></div>
      <h1>{{ 'Join.Welcome' | translate }}</h1>
      <p>{{ 'Join.Successful' | translate }} <strong>{{ 'Join.ContentAdmin' | translate }}</strong>
        {{ 'Join.SentDetails' | translate }}</p>
      <p>{{ 'Join.Close' | translate }}</p>
      <p>{{ 'Join.Ta' | translate }}</p>
      <p><strong>{{ company_name }} {{ 'Join.Curation' | translate }}</strong></p>
    </div>

    <form
      style="transition: all .2s ease-out"
      *ngSwitchDefault
      #formJoin="ngForm"
      (ngSubmit)="formJoin.form.valid && submitJoinForm(formJoin.value)"
      novalidate>

      <div *ngIf="duplicateField === 'tel'">
        <h1 class="rc-highlight">{{ 'Join.AlreadyRegHeader' | translate }}</h1>
        <p>{{ 'Join.MobileReg' | translate }}<a [routerLink]="['/signin']">{{ 'Join.SignInPassword' | translate }}</a>.</p>
        <p>{{ 'Join.If' | translate }}<a
          (click)="curationRequest()">{{ 'Join.Callback' | translate }}</a>{{ 'Join.Someone' | translate }}</p>
      </div>
      <div *ngIf="duplicateField === 'email'">
        <h1 class="rc-highlight">{{ 'Join.AlreadyRegHeader' | translate }}</h1>
        <p>{{ 'Join.EmailReg' | translate }}<a
          [routerLink]="['/signin']">{{ 'Join.SignInPassword' | translate }}</a>.</p>
        <p>{{ 'Join.If' | translate }}<a
          (click)="curationRequest()">{{ 'Join.Callback' | translate }}</a>{{ 'Join.Someone' | translate }}</p>
      </div>
      <div *ngIf="duplicateField === 'both'">
        <h1 class="rc-highlight">{{ 'Join.AlreadyRegHeader' | translate }}</h1>
        <p>{{ 'Join.BothReg' | translate }}<a [routerLink]="['/signin']">{{
          'Join.SignInPassword' | translate }}</a>.</p>
        <p>{{ 'Join.If' | translate }}<a
          (click)="curationRequest()">{{ 'Join.Callback' | translate }}</a>{{ 'Join.Someone' | translate }}</p>
      </div>

      <div *ngIf="!duplicateField">
      <h1>{{ 'Join.JoinUs' | translate }}</h1>
      <span>{{ 'Join.Or' | translate }} <a [routerLink]="'/signin'">{{ 'Join.SignIn' | translate }}</a>
        {{ 'Join.Already' | translate }}</span>
      </div>

      <mat-form-field hideRequiredMarker>
        <mat-label>{{ 'Join.FullName' | translate }}</mat-label>
        <input
          #name="ngModel"
          ngModel
          matInput
          type="text"
          name="name"
          [placeholder]="'Join.FullName' | translate"
          autofocus
          required>
        <mat-hint align="end" *ngIf="name.invalid">{{ 'Join.FirstAndLast' | translate }}</mat-hint>
        <mat-error align="end" *ngIf="name.errors?.required">{{ 'Join.FullName' | translate }}
          {{ 'Join.Required' | translate }}</mat-error>
      </mat-form-field>
      <mat-form-field hideRequiredMarker>
        <mat-label>{{ 'Join.Job' | translate }}</mat-label>
        <mat-select ngModel name="role">
          <mat-option value="Owner">{{ 'Join.Owner' | translate }}</mat-option>
          <mat-option value="Chef">{{ 'Join.Chef' | translate }}</mat-option>
          <mat-option value="Manager">{{ 'Join.Manager' | translate }}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field hideRequiredMarker>
        <mat-label>{{ 'Join.Email' | translate }}</mat-label>
        <input
          #email="ngModel"
          ngModel
          matInput
          type="email"
          name="email"
          [placeholder]="'Join.Email' | translate"
          email
          required>
        <mat-hint align="end" *ngIf="email.invalid">{{ 'Join.Contact' | translate }}</mat-hint>
        <mat-error align="end" *ngIf="email?.errors">{{ 'Join.ValidEmail' | translate }}</mat-error>
      </mat-form-field>
      <mat-form-field hideRequiredMarker>
        <mat-label>{{ 'Join.Mobile' | translate }}</mat-label>
        <input
          #mobile="ngModel"
          ngModel
          matInput
          type="tel"
          name="mobile"
          [placeholder]="'Join.Mobile' | translate"
          required>
        <mat-error align="end" *ngIf="mobile.errors?.required">{{ 'Join.ValidTelephone' | translate }}</mat-error>
      </mat-form-field>
      <mat-form-field *ngIf="!referrer?.code">
        <mat-label>{{ 'Join.RefCode' | translate }}</mat-label>
        <input
          #code="ngModel"
          ngModel
          matInput
          type="text"
          name="code"
          [placeholder]="'Join.RefCode' | translate">
      </mat-form-field>
      <button
        type="submit"
        mat-flat-button
        [disabled]="!formJoin.valid || isSubmitting"
        color="accent">{{ 'Join.Join' | translate }}</button>
      <p class="mat-small">{{ 'Join.Confirm' | translate }} <a
        href="{{ company_url }}/terms/" target="_blank">{{ 'Join.Terms' | translate }}</a> {{ 'Join.And' | translate }}
        <a href="{{ company_url }}/privacy/" target="_blank">{{ 'Join.Privacy' | translate }}</a>.
      </p>
    </form>
  </div>

</div>


