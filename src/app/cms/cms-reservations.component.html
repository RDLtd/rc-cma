<div class="mdc-layout-grid">
  <!-- TOOLBAR -->
  <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12">
    <mat-toolbar class="rc-toolbar rc-toolbar-section">
      <span>{{ 'CMS-Reservations.ResInfo' | translate }}</span>
      <span class="rc-space-filler"></span>
      <span class="rc-toolbar-actions">
        <button
          mat-icon-button
          (click)="help.dspHelp('cms-reservations', restaurant)">
          <mat-icon>help_outline</mat-icon>
        </button>
        <!-- UNDO CHANGES -->
        <button
          mat-icon-button
          [disabled]="!dataChanged"
          (click)="resetData()"
          [matTooltip]="'CMS-Features.UndoChanges' | translate">
          <mat-icon>undo</mat-icon>
        </button>
        <!-- SAVE CHANGES -->
        <button
          mat-icon-button
          [disabled]="!dataChanged"
          (click)="updateData()"
          [matTooltip]="'CMS-Features.SaveChanges' | translate">
          <mat-icon>check</mat-icon>
        </button>
      </span>
    </mat-toolbar>
      </div>

  <!-- GENERAL -->
  <mat-card
    class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6 mdc-layout-grid__cell--span-4-tablet rc-cms-res">
    <mat-card-title>
      <h2>{{ 'CMS-Reservations.General' | translate }}</h2>
    </mat-card-title>
    <mat-card-content>
      <mat-form-field
        class="rc-full-width"
        floatPlaceholder="never">
        <mat-placeholder>{{ 'CMS-Reservations.GeneralDesc' | translate }} {{ resGeneralMaxLength }})</mat-placeholder>
          <textarea
            #bkgsGeneral
            matInput
            matTextareaAutosize
            matAutosizeMinRows="5"
            matAutosizeMaxRows="5"
            name="cms_description_reservation_info"
            maxlength="{{ resGeneralMaxLength }}"
            (keyup)="setChanged(bkgsGeneral)"
            [(ngModel)]="descriptions.cms_description_reservation_info">
          </textarea>
        <mat-hint align="end">{{ bkgsGeneral.value.length }}/{{ resGeneralMaxLength }}</mat-hint>
      </mat-form-field>
    </mat-card-content>
  </mat-card>

  <!-- ONLINE BOOKINGS -->
  <mat-card
    class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6 mdc-layout-grid__cell--span-4-tablet rc-cms-res-online">
    <form #frmBooking="ngForm">
      <mat-card-title>
        <h2>{{ 'CMS-Reservations.OnlineBookings' | translate }}</h2>
      </mat-card-title>
      <mat-card-content>
        <!-- PROVIDER -->
        <mat-form-field class="rc-full-width">
          <mat-placeholder>{{ 'CMS-Reservations.Provider' | translate }}</mat-placeholder>
          <mat-select
            #bkgProvider
            name="bkg_provider"
            (selectionChange)="changeOption(bkgProvider)"
            [(ngModel)]="selected_booking_provider_index">
            <mat-option
              *ngFor="let provider of booking_providers; let idx = index"
              [value]="idx">
              {{ provider.booking_provider_label }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <!-- PROVIDER ID -->
        <div *ngIf="selected_booking_provider_id != 5" class="rc-flex-spaced">
          <mat-form-field class="rc-full-width">
            <mat-placeholder>{{ booking_provider_rid_label }}</mat-placeholder>
            <input
              #bkgProviderId
              matInput
              name="bkg_provider_reference"
              (keyup)="setChanged(bkgProviderId)"
              [(ngModel)]="booking_provider_reference">
            <a
              *ngIf="booking_provider_reference && selected_booking_provider_index != 0"
              matSuffix
              mat-icon-button
              [matTooltip]="'CMS-Reservations.TestLink' | translate"
              (click)="testBkgLink()">
              <mat-icon>arrow_forward</mat-icon>
            </a>
            <mat-error><strong>{{ 'CMS-Reservations.ValidEmail' | translate }}</strong></mat-error>
          </mat-form-field>

        </div>
        <!-- MIN/MAX COVERS -->
        <div *ngIf="selected_booking_provider_index < 1" class="rc-flex-spaced">

        <mat-form-field style="width: 48%;">
          <mat-placeholder>{{ 'CMS-Reservations.MaxCovers' | translate }}</mat-placeholder>
          <input
            #bkgMaxCovers
            matInput
            type="number"
            name="bkg_max_covers"
            min="2" max="12"
            (keyup)="setChanged(bkgMaxCovers)"
            [(ngModel)]="descriptions.cms_booking_max_covers">
        </mat-form-field>

        <mat-form-field style="width: 48%;">
          <mat-placeholder>{{ 'CMS-Reservations.MaxDays' | translate }}</mat-placeholder>
          <input
            #bkgAdvDays
            matInput
            type="number"
            name="bkg_max_advance_days"
            min="0"
            max="90"
            (keyup)="setChanged(bkgAdvDays)"
            [(ngModel)]="descriptions.cms_booking_max_advance_days">
          </mat-form-field>

        </div>
      </mat-card-content>
    </form>
  </mat-card>

  <!-- GROUPS -->
  <mat-card
    class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6 mdc-layout-grid__cell--span-4-tablet">
    <mat-card-title>
      <h2>{{ 'CMS-Reservations.GroupBookings' | translate }}</h2></mat-card-title>
    <mat-card-content>
      <mat-form-field
        class="rc-full-width"
        floatPlaceholder="never">
          <textarea
            #bkgsGroup
            matInput
            matTextareaAutosize
            matAutosizeMinRows="3"
            matAutosizeMaxRows="5"
            name="cms_descriptions_group"
            maxlength="{{ resGroupMaxLength }}"
            placeholder="{{ 'CMS-Reservations.GroupPolicy' | translate }} {{ resGroupMaxLength }})"
            (keyup)="setChanged(bkgsGroup)"
            [(ngModel)]="descriptions.cms_description_group">
          </textarea>
        <mat-hint align="end">{{ bkgsGroup.value.length }}/{{ resGroupMaxLength }}</mat-hint>
      </mat-form-field>
    </mat-card-content>
  </mat-card>

  <!-- PRIVATE DINING -->
  <mat-card
    class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6 mdc-layout-grid__cell--span-4-tablet">
    <mat-card-title>
      <h2>{{ 'CMS-Reservations.PrivateDining' | translate }}</h2></mat-card-title>
    <mat-card-content>
      <mat-form-field
        class="rc-full-width"
        floatPlaceholder="never">
        <textarea
          #bkgsPrivate
          matInput
          matTextareaAutosize
          matAutosizeMinRows="3"
          matAutosizeMaxRows="5"
          name="cms_descriptions_private"
          maxlength="{{ resPrivateMaxLength }}"
          placeholder="{{ 'CMS-Reservations.PrivateInfo' | translate }} {{ resPrivateMaxLength }})"
          (keyup)="setChanged(bkgsPrivate)"
          [(ngModel)]="descriptions.cms_description_private">
        </textarea>
        <mat-hint align="end">{{ bkgsPrivate.value.length }}/{{ resPrivateMaxLength }}</mat-hint>
      </mat-form-field>
    </mat-card-content>
  </mat-card>
</div>

<!--<hr>-->

<!--<pre>-->

<!--{{ descriptions | json }}-->

<!--</pre>-->
