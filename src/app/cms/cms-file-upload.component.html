<div class="rc-dialog rc-dialog-cms-image-upload">

  <h1 mat-dialog-title>
    {{ 'CMS-File-Upload.New' | translate }} {{ data.type | titlecase }} {{ 'CMS-File-Upload.Upload' | translate }}
  </h1>

  <mat-dialog-content>

      <!-- IMAGE PREVIEW-->
      <div *ngIf="data.type === 'image'" style="--aspect-ratio: 16/9; background-color: #eee;">
        <img *ngIf="filePreview" [src]="filePreview" [alt]="">
      </div>

      <!-- FILE SELECT BUTTON -->
      <div class="rc-file-input-wrapper">

        <label class="rc-file-input-label rc-centre rc-full-width" for="fileUpload">
          <mat-icon>cloud_upload</mat-icon>
          <span>{{ uploadLabel | titlecase }} <span *ngIf="inProgress">({{ uploader?.progress }}%)</span></span>
        </label>

        <input
          type="file"
          id="fileUpload"
          class="rc-file-input-hide"
          #fileInput
          ng2FileSelect
          [uploader]="uploader"
          (change)="fileSelected()"/>

      </div>

    <!-- UPLOAD FORMS -->
    <div>

      <!-- MENU UPLOAD FORM -->
      <form *ngIf="data.type === 'menu'" #menuUploadForm="ngForm">

        <section>

          <!-- MENU CATEGORY -->
        <mat-form-field class="rc-full-width">
          <input
            matInput
            ngModel
            name="menuClass"
            [placeholder]="'CMS-File-Upload.MenuName' | translate"
            required>
        </mat-form-field>
          <!-- MENU DESC/CAPTION -->
        <mat-form-field class="rc-full-width">
          <input matInput
                 ngModel
                 name="menuCaption"
                 [placeholder]="'CMS-File-Upload.MenuCaption' | translate">
        </mat-form-field>

        </section>

      </form>

      <!-- IMAGE UPLOAD FORM -->

      <form *ngIf="data.type === 'image'" #imgUploadForm="ngForm">

        <!-- CATEGORY -->
        <section>
          <mat-form-field class="rc-full-width">
            <mat-select
              required
              ngModel
              [placeholder]="'CMS-File-Upload.ImageCat' | translate"
              name="imgClass"
              class="rc-full-width">
                <mat-option
                  *ngFor="let imgClass of imgClasses"
                  [value]="imgClass.value">
                {{ imgClass.lbl }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </section>

        <!-- DEFAULT IMAGE? -->
        <section>
          <mat-checkbox
              ngModel
            name="imgDefault">
            <span>{{ 'CMS-File-Upload.Default' | translate }}</span>
          </mat-checkbox>
        </section>

      </form>

    </div>

  </mat-dialog-content>

  <mat-progress-bar *ngIf="inProgress" color="primary" [value]="uploader?.progress"></mat-progress-bar>

  <mat-dialog-actions align="center">
    <!-- Cancel upload -->
    <button
      mat-button
      mat-dialog-close>
      {{ 'CMS-File-Upload.CancelCap' | translate }}
    </button>
    <!-- Start ulpoad -->
    <button
      mat-flat-button
      (click)="upload()"
      color="primary"
      [disabled]="!filePrimed || !validForm()">
      {{ 'CMS-File-Upload.UploadCap' | translate }}
    </button>

  </mat-dialog-actions>

</div>
